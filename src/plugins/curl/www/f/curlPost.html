<!DOCTYPE html>
<html>
  <head>
    <title>curlPost</title>
    <link rel="stylesheet" type="text/css" href="../../jsoncalc.css">
    <meta name="description" content="jsoncalc curlPost - Send an HTTP/HTTPS POST request">
    <meta name="keywords" content="string, number, array, object, boolean, datetime, aggregate, jsoncalc, function reference, curlPost">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
  <body>
    <h1>curlPost - Send an HTTP/HTTPS "POST" request</h1>
    <dl>
      <dt>plugin curl;
      <br/>curlPost(<var>url</var>, <var>content</var>, <var>flag?</var>...)
      
      <dd>
      This is part of the <a target="_PARENT" href="../../index.html?p=curl">curl</a> plugin.
      You must load the plugin via either -lcurl on the shell command line,
      or a <tt>plugin curl;</tt> line in a script.
      <p>
      This sends an HTTP or HTTPS "POST" request, and returns the response.
      POST requests differ from GET in that any added data is sent as the
      content of the request, instead of being built into the URL.
      This allows POST requests to sent larger data with a complex structure.
      <p>
      The <tt>url</tt> and <tt>content</tt> arguments are required.
      <p>
      Any arguments after that should be a flag as listed in the
      "Other Features" section of the 
      <a target="_PARENT" href="../../index.html?p=curl">curl</a> plugin
      overview.
      Some of these flags require extra data which should be given as the
      argument following the flag;
      their names end with a "_" character as a clue that more info is needed.
      For example, the <tt>CURL.bearer_</tt> flag should always be followed
      by the bearer token string.
    </dl>
    <details open>
      <summary>Examples</summary>

      <div class="example">
	<kbd>const data={size:"L", color:"Brown", odor: "None"};</kbd>
	<kbd>curlPost("https://example.net/app/request.json", data, CURL.decode, CURL.bearer_, token)</kbd>
	<samp><i>A bunch of parsed data.</i></samp>
	First we build an object containing data to send as the request's content.
	Then we call <tt>curlPost()</tt>, passing it the URL and the data,
	followed by flags.
	The <tt>CURL.decode</tt> flag tells it to attempt to decode the response
	so we get an object back instead of a big string of JSON source code.
	The <tt>CURL.bearer_</tt> flag tells it to use "Authentication: Bearer"
	with the bearer token that's stored in a "token" variable.
	The parsed response data is then returned.
      </div>

    </details>

    <details>
      <summary>Notes</summary>
      <ul>

        <li>Passing a <tt>CURL.decode</tt> flag to parse the response also
            implies that the request headers should include an
            "Accept: application/json" header line.
            However, if you've loaded another plugin that supports parsing
            other data formats (e.g., the "csv" or "xml" plugins) then those
            will be recognized and parsed too.

      </ul>
    </details>

    <details>
      <summary>See Also</summary>
      <table>
        <tr><td><a target="_PARENT" href="../../index.html?p=curl">plugin curl</a></td><td>Overview of the curl plugin</td><tr>
        <tr><td><a target="_PARENT" href="../../index.html?f=curl/curlGet">curlGet()</a></td><td>Send an HTTP/HTTPS "GET" request</td></tr>
        <tr><td><a target="_PARENT" href="../../index.html?f=curl/curlOther">curlOther()</a></td><td>Send an HTTP/HTTPS request other than "GET" or "POST"</td></tr>
      </table>
    </details>

  </body>
</html>
