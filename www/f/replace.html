<!DOCTYPE html>
<html>
  <head>
    <title>replace</title>
    <link rel="stylesheet" type="text/css" href="../jsoncalc.css">
    <meta name="description" content="jsoncalc replace - Replace the first matching text in a string">
    <meta name="keywords" content="string, number, array, object, boolean, datetime, aggregate, jsoncalc, function reference, replace">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script src="../clipboard.js"></script>
    <script>
	$(document).ready(function(){
	    $("div.example kbd").css("cursor", "copy")
				.attr("title", "Click to copy")
				.on("click", function(){
					copyToClipboard(this.innerText);
				});
	});
    </script>
  </head>
  <body>
    <h1>replace - Replace the first matching text in a string</h1>
    <dl>
      <dt>replace(<var>str</var>, <var>searchstr</var>, <var>replacestr</var>)
      <br/>replace(<var>str</var>, <var>searchstr</var>, <var>replacestr</var>, true)
      <br/>replace(<var>str</var>, <var>regex</var>, <var>replacepattern</var>)
      <dd>
      Return a version of string <var>str</var> in which the first instance of
      substring <var>searchstr</var> has been replaced by <var>replacestr</var>.
      The replacement is case-sensitive, unless you add an extra <tt>true</tt> argument.
      <p>
      Alternatively, return a version of string <var>str</var> in which the first
      match of regular expression <var>regex</var> is replaced by a string derived
      from <var>replacepattern</var>.
      If <var>regex</var> has a <tt>g</tt> flag, then all matches will be replaced,
      like the <a target="_PARENT" href="../index.html?f=replaceAll">replaceAll()</a>
      function.
      Matching will be case-sensitive unless you include a <tt>i</tt> flag on
      <var>regex</var>.
      <var>replacepattern</var> is a string which may include the following symbols
      to access all or part of the matching text.
      <table>
        <tr><th>Symbol</th><th>What it's replaced by</th></tr>
        <tr><td>$&amp; or $0</td><td>Copy of the matching text in <var>str</var></td></tr>
        <tr><td>$1 to $9</td><td>Text matching 1st to 9th \(\)-wrapped portion of <var>regex</var></td></tr>
        <tr><td>$$</td><td>A single dollar sign</td></tr>
      </table>
    </dl>
    <details open>
      <summary>Examples</summary>

      <div class="example">
	<kbd>"subject string".replace("s", "S")</kbd>
	<samp>"Subject string"</samp>
        This replaces the first lowercase "s" with an uppercase "S".
        The second "s" is unaffected.
      </div>

      <div class="example">
	<kbd>"The East Coast".replace("EAST", "WEST", true)</kbd>
	<samp>"The WEST Coast"</samp>
	This is a case-insensitive replacement, so "East" matches "EAST",
	and gets replaced by "WEST".
	Note that no attempt is made to convert "WEST" to be the same case as the
	matching text.
      </div>

      <div class="example">
	<kbd>"subject string".replace(/[aeiou]/g, "($&amp;)")</kbd>
	<samp>"s(u)bj(e)ct str(i)ng"</samp>
	The regular expression matches any vowel.
	Since it is followed by a <tt>g</tt> flag,
	it will replace all vowels instead of just the first.
	The replacement pattern uses <tt>$&amp;</tt> to include the vowel in the
	replacement text, with parentheses added.
      </div>

      <div class="example">
	<kbd>"8005551212".replace(/\(...\)\(...\)\(....\)/, "($1) $2-$3")</kbd>
	<samp>"(800) 555-1212"</samp>
	Here we're dividing a 10-digit phone number into segments, and then adding
	punctuation around those segments to make it pretty.
      </div>

      <div class="example">
	<kbd>"(800) 555-1212".replace(/[^0-9]/g, "")</kbd>
	<samp>"8005551212"</samp>
        Now we're removing all non-digits from the phone number to make it compact again.
      </div>

    </details>

    <details>
      <summary>Notes</summary>
      <ul>
        <li><strong>JsonCalc</strong> uses POSIX regular expressions, which are a bit
            different from JavaScript.
        <li>The JavaScript version of <tt>replace()</tt> supports a few more <tt>$x</tt>
            symbols in the replacement pattern.
	<li>JavaScript does not support the final <tt>true</tt> argument to make string
	    replacements be case-insensitive.
      </ul>
    </details>

    <details>
      <summary>See Also</summary>
      <table>
        <tr><td><a target="_PARENT" href="../index.html?f=replaceAll">replaceAll()</a></td><td>Replace all instances in a string</td><tr>
      </table>
  </body>
</body>
